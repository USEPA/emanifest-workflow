import{O as le,a2 as b,q as x,a6 as se,Q as k,o as n,a,w as s,W as y,s as J,$ as L,e as u,Z as re,c as A,Y as C,S as R,X as oe,T as G,g as B,p as W,b as M,n as ne,f as X,ac as Z,j as ue,a9 as Q,aK as ie,a1 as de,a8 as me,I as H,at as ce,U as q,aH as fe,aL as ve}from"./index-CTGr2a6E.js";import{b as $,c as j,d as ee,_ as pe,g as ye}from"./VRow-CNhPXU6c.js";import{g as te,k as ge,o as be,p as Ve,q as O,r as ke,V as K,s as we,t as he,e as Ce,v as Se,j as D,h as Ie}from"./VSheet-Be0VwyW_.js";import{V as ae,a as Re}from"./VAlert-RD-NAf9z.js";import{V as xe}from"./VTable-VuUz7xRA.js";const Ae={class:"d-flex align-center ga-2 mb-2"},Pe={__name:"WasteCodes",setup(o){const{smAndDown:S}=le(),f=b(!1),p=b("HQ"),i=b([]),l=b(!1),d=b(""),v=b(""),I=[{title:"Code",key:"code",sortable:!0},{title:"Description",key:"description",sortable:!0,width:"100%"}],w=x(()=>{const c=v.value.trim().toLowerCase();return c?i.value.filter(t=>String(t.code).toLowerCase().includes(c)||String(t.description).toLowerCase().includes(c)||String(t.label||"").toLowerCase().includes(c)):i.value});async function m(){l.value=!0,d.value="";try{const c=`https://rcrapublic.epa.gov/rcra-hwip/api/lookup/waste-codes/${encodeURIComponent(p.value)}`,t=await fetch(c,{headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Failed to load waste codes (${t.status})`);const g=await t.json();i.value=Array.isArray(g)?g:[]}catch(c){d.value=c?.message||"Failed to load waste codes."}finally{l.value=!1}}return se(f,c=>{c?m():v.value=""}),(c,t)=>(n(),k(G,null,[a(L,{color:"primary",onClick:t[0]||(t[0]=g=>f.value=!0),tonal:""},{default:s(()=>[a(J,{icon:"mdi-format-list-bulleted"}),t[4]||(t[4]=y(" Browse Federal Waste Codes ",-1))]),_:1}),a(Re,{modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=g=>f.value=g),fullscreen:oe(S),"max-width":"1000",scrollable:""},{default:s(()=>[a($,null,{default:s(()=>[a(j,{class:"d-flex align-center justify-space-between"},{default:s(()=>[t[5]||(t[5]=u("span",null,"Waste Codes",-1)),a(L,{icon:"mdi-close",variant:"text",onClick:t[1]||(t[1]=g=>f.value=!1)})]),_:1}),a(re),a(ee,null,{default:s(()=>[u("div",Ae,[a(te,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=g=>v.value=g),label:"Search codes/descriptions",clearable:"","prepend-inner-icon":"mdi-magnify","hide-details":"",style:{"max-width":"340px"}},null,8,["modelValue"])]),a(ge,{headers:I,items:w.value,loading:l.value,"item-key":"id",density:"compact","fixed-header":"",height:"60vh",class:"border-t"},{loading:s(()=>[...t[6]||(t[6]=[u("div",{class:"pa-6 text-medium-emphasis"},"Loading waste codesâ€¦",-1)])]),_:1},8,["items","loading"]),d.value?(n(),A(ae,{key:0,type:"error",variant:"tonal",class:"mt-3",border:"start","border-color":"error"},{default:s(()=>[y(R(d.value),1)]),_:1})):C("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])],64))}},Ge=W({...ue(),...Ve()},"VForm"),Ne=B()({name:"VForm",props:Ge(),emits:{"update:modelValue":o=>!0,submit:o=>!0},setup(o,S){let{slots:f,emit:p}=S;const i=be(o),l=b();function d(I){I.preventDefault(),i.reset()}function v(I){const w=I,m=i.validate();w.then=m.then.bind(m),w.catch=m.catch.bind(m),w.finally=m.finally.bind(m),p("submit",w),w.defaultPrevented||m.then(c=>{let{valid:t}=c;t&&l.value?.submit()}),w.preventDefault()}return M(()=>u("form",{ref:l,class:X(["v-form",o.class]),style:ne(o.style),novalidate:!0,onReset:d,onSubmit:v},[f.default?.(i)])),Z(i,l)}}),_e=W({...ke({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),T=B()({name:"VRadio",props:_e(),setup(o,S){let{slots:f}=S;return M(()=>{const p=O.filterProps(o);return a(O,Q(p,{class:["v-radio",o.class],style:o.style,type:"radio"}),f)}),{}}}),qe=W({height:{type:[Number,String],default:"auto"},...Ce(),...ce(Se(),["multiple"]),trueIcon:{type:H,default:"$radioOn"},falseIcon:{type:H,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Y=B()({name:"VRadioGroup",inheritAttrs:!1,props:qe(),emits:{"update:modelValue":o=>!0},setup(o,S){let{attrs:f,slots:p}=S;const i=ie(),l=x(()=>o.id||`radio-group-${i}`),d=de(o,"modelValue"),v=b();return M(()=>{const[I,w]=me(f),m=K.filterProps(o),c=O.filterProps(o),t=p.label?p.label({label:o.label,props:{for:l.value}}):o.label;return a(K,Q({ref:v,class:["v-radio-group",o.class],style:o.style},I,m,{modelValue:d.value,"onUpdate:modelValue":g=>d.value=g,id:l.value}),{...p,default:g=>{let{id:N,messagesId:F,isDisabled:E,isReadonly:z}=g;return u(G,null,[t&&a(we,{id:N.value},{default:()=>[t]}),a(he,Q(c,{id:N.value,"aria-describedby":F.value,defaultsTarget:"VRadio",trueIcon:o.trueIcon,falseIcon:o.falseIcon,type:o.type,disabled:E.value,readonly:z.value,"aria-labelledby":t?N.value:void 0,multiple:!1},w,{modelValue:d.value,"onUpdate:modelValue":_=>d.value=_}),p)])}})}),Z({},v)}}),De={href:"https://www.epa.gov/e-manifest/state-only-hazardous-waste-subject-resource-conservation-and-recovery-act-manifests",target:"_blank"},Ee={key:2},ze={class:"font-weight-medium"},Fe={class:"mt-8"},Ue={class:"flex-grow-1"},Te={key:0,class:"mb-2"},Le={key:1,class:"mb-2"},Qe={key:2},$e={class:"mt-2"},je={__name:"GeneratorWizard",setup(o,{expose:S}){const f=b(""),p=b(!1),i=b(""),l=b(null),d=b(null),v=b(null);function I(){d.value=null,v.value=null}S({reset:I});const w={vsqg:"100 kilograms or less of hazardous waste or 1 kilogram or less of acutely hazardous waste",sqg:"More than 100 kilograms, but less than 1,000 kilograms",lqg:"More than 1,000 kilograms or more than one kilogram of acutely hazardous waste"},m={vsqg:{fullName:"Very Small Quantity Generators",shortName:"VSQGs",registerId:!1,registerUser:!1,registerElectronic:!0},sqg:{fullName:"Small Quantity Generators",shortName:"SQGs",registerId:!0,registerUser:!0,registerElectronic:!0},lqg:{fullName:"Large Quantity Generators",shortName:"LQGs",registerId:!0,registerUser:!0,registerElectronic:!0}},c={registerId:"Required to obtain an EPA ID Number",registerUser:"Required for user to register for an account",registerElectronic:"Required to have a registered user to use Electronic"},t=x(()=>Object.entries(m).map(([V,e])=>({key:V,...e}))),g=x(()=>Object.entries(c).map(([V,e])=>({key:V,label:e}))),N=x(()=>f.value.trim().toUpperCase().replace(/\s+/g,"")),F=x(()=>l.value&&l.locationAddress!==null),E=x(()=>l.value?l.value.largeQuantityGenerator?"LQG":l.value.smallQuantityGenerator?"SQG":l.value.verySmallQuantityGenerator?"VSQG":null:null),z=x(()=>{const V=l.value;if(!V)return[];const e=[];return V.operatingTsdf&&e.push("TSDF"),V.transporter&&e.push("Transporter"),V.transferFacility&&e.push("Transfer Facility"),V.hwCleanupSite&&e.push("Cleanup Site"),e});x(()=>l.value?JSON.stringify(l.value,null,2):"");async function _(){i.value="",l.value=null;const V=N.value;if(!V){i.value="Please enter an EPA ID Number.";return}const e=`https://rcrapublic.epa.gov/rcra-hwip/api/site/summary/${encodeURIComponent(V)}`,r=new AbortController,h=setTimeout(()=>r.abort(),1e4);p.value=!0;try{const P=await fetch(e,{method:"GET",headers:{Accept:"application/json"},signal:r.signal});if(!P.ok)throw P.status===404?new Error("No site found for that EPA ID."):new Error(`Lookup failed (${P.status})`);const U=await P.json();l.value=Array.isArray(U)?U[0]??null:U,l.value||(i.value="No site found for that EPA ID.")}catch(P){i.value=P.name==="AbortError"?"Request timed out. Please try again.":P.message||"Lookup failed. Please try again."}finally{clearTimeout(h),p.value=!1}}return(V,e)=>(n(),A(Ie,{class:"pa-3"},{default:s(()=>[u("div",null,[e[10]||(e[10]=u("div",{class:"text-h6 mb-4"},"Generator Obligations",-1)),a(Y,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=r=>d.value=r)},{label:s(()=>[...e[3]||(e[3]=[u("span",{class:"text-wrap"},"Does your site generate federally-regulated RCRA hazardous waste?",-1)])]),default:s(()=>[a(T,{label:"Yes",value:"yes"}),a(T,{label:"No",value:"no"})]),_:1},8,["modelValue"]),a(Pe),d.value==="yes"?(n(),A(Y,{key:0,class:"mt-6",modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=r=>v.value=r)},{label:s(()=>[...e[4]||(e[4]=[u("span",{class:"text-wrap"},"How much waste is generated at your site on a monthly basis?",-1)])]),default:s(()=>[(n(),k(G,null,q(w,(r,h)=>a(T,{label:r,value:h},null,8,["label","value"])),64))]),_:1},8,["modelValue"])):C("",!0),d.value==="no"?(n(),A(ae,{key:1,type:"info",variant:"tonal",class:"mt-8"},{default:s(()=>[e[6]||(e[6]=y(" Site is not subject to federal RCRA requirements. Please verify if your site generates any ",-1)),u("a",De,[e[5]||(e[5]=y(" state-only regulated waste subject to RCRA requirements ",-1)),a(J,{icon:"mdi-open-in-new",size:"18"})]),e[7]||(e[7]=y(" and follow applicable regulatory requirements.",-1))]),_:1})):C("",!0),d.value==="yes"&&v.value?(n(),k("div",Ee,[a(xe,{density:"comfortable"},{default:s(()=>[u("thead",null,[u("tr",null,[e[9]||(e[9]=u("th",{class:"text-left"},"Requirement",-1)),(n(!0),k(G,null,q(t.value,r=>(n(),k("th",{key:r.key,class:"text-center"},[y(R(r.shortName)+" ",1),r.key&&r.key===v.value?(n(),A(D,{key:0},{default:s(()=>[...e[8]||(e[8]=[y("Selected",-1)])]),_:1})):C("",!0)]))),128))])]),u("tbody",null,[(n(!0),k(G,null,q(g.value,r=>(n(),k("tr",{key:r.key},[u("td",ze,R(r.label),1),(n(!0),k(G,null,q(t.value,h=>(n(),k("td",{key:h.key,class:X(h.key&&h.key===v.value?"bg-grey-lighten-3 text-center":"text-center")},[a(D,{size:"small",label:"",color:m[h.key][r.key]?"success":"error",variant:m[h.key][r.key]?"tonal":"outlined","prepend-icon":m[h.key][r.key]?"mdi-check-circle":"mdi-close-circle"},{default:s(()=>[y(R(m[h.key][r.key]?"Yes":"No"),1)]),_:2},1032,["color","variant","prepend-icon"])],2))),128))]))),128))])]),_:1})])):C("",!0)]),u("div",Fe,[a($,null,{default:s(()=>[a(j,null,{default:s(()=>[...e[11]||(e[11]=[y("EPA ID Number Lookup",-1)])]),_:1}),a(Ne,{onSubmit:fe(_,["prevent"]),class:"mx-6"},{default:s(()=>[a(te,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=r=>f.value=r),label:"EPA ID Number",class:"epa-id-field",variant:"outlined",clearable:"",density:"comfortable",error:!!i.value,"error-messages":i.value?[i.value]:[],onKeyup:ve(_,["enter"])},{"append-inner":s(()=>[a(L,{color:"primary",variant:"flat",size:"small",disabled:!f.value||p.value,loading:p.value,onClick:_},{default:s(()=>[...e[12]||(e[12]=[y(" Search ",-1)])]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue","error","error-messages"])]),_:1})]),_:1}),l.value?(n(),A($,{key:0,class:"mt-4"},{default:s(()=>[a(j,{class:"d-flex align-center"},{default:s(()=>[u("div",Ue,R(l.value.handlerName||"Unknown site name"),1),l.value.activeSite?(n(),A(D,{key:0,color:"success",size:"small",label:"",class:"ml-2"},{default:s(()=>[...e[13]||(e[13]=[y(" Active Site ",-1)])]),_:1})):C("",!0)]),_:1}),a(ye,null,{default:s(()=>[y(R(l.value.handlerId),1)]),_:1}),a(ee,null,{default:s(()=>[F.value?(n(),k("div",Te,[e[14]||(e[14]=u("strong",null,"Address:",-1)),y(" "+R(l.value.locationAddress),1)])):C("",!0),E.value?(n(),k("div",Le,[e[15]||(e[15]=u("strong",null,"Generator Category:",-1)),a(D,{color:"primary",size:"small",label:"",class:"ml-2"},{default:s(()=>[y(R(E.value),1)]),_:1})])):C("",!0),z.value.length?(n(),k("div",Qe,[e[16]||(e[16]=u("strong",null,"Roles:",-1)),u("div",$e,[(n(!0),k(G,null,q(z.value,r=>(n(),A(D,{key:r,color:"blue",size:"small",label:"",class:"mr-2 mb-2"},{default:s(()=>[y(R(r),1)]),_:2},1024))),128))])])):C("",!0)]),_:1})]),_:1})):C("",!0)])]),_:1}))}},Ke=pe(je,[["__scopeId","data-v-5ed827a4"]]);export{Ke as G,Y as V,T as a};
