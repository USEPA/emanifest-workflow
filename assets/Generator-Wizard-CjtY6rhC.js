import{O as Y,$ as g,q as x,a0 as K,Q as y,o,a,w as t,W as m,s as L,a1 as F,e as n,Y as J,c as C,X as w,S as h,Z as X,T as G,g as Z,p as ee,b as te,n as ae,f as $,a2 as le,j as re,_ as se,U as q,a3 as oe,a4 as ne}from"./index-BWmrd059.js";import{b as P,c as Q,d as W,f as ue,V as ie,a as de,e as me}from"./VRow-7Gn8x052.js";import{V as B,a as ce}from"./VDataTable-4-u1PQWi.js";import{V as O,a as fe}from"./VAlert-CqS-7mfK.js";import{V as j,a as E}from"./VRadioGroup-O1XjfDfO.js";import{V as ve}from"./VTable-CVdiI5oe.js";import{c as pe,m as ye,V as I}from"./VChip-ClvGvPSC.js";import{V as ge}from"./VSheet-C5AiyHm_.js";const be={class:"d-flex align-center ga-2 mb-2"},ke={__name:"WasteCodes",setup(_){const{smAndDown:N}=Y(),c=g(!1),S=g("HQ"),u=g([]),r=g(!1),f=g(""),v=g(""),R=[{title:"Code",key:"code",sortable:!0},{title:"Description",key:"description",sortable:!0,width:"100%"}],k=x(()=>{const d=v.value.trim().toLowerCase();return d?u.value.filter(l=>String(l.code).toLowerCase().includes(d)||String(l.description).toLowerCase().includes(d)||String(l.label||"").toLowerCase().includes(d)):u.value});async function i(){r.value=!0,f.value="";try{const d=`https://rcrapublic.epa.gov/rcra-hwip/api/lookup/waste-codes/${encodeURIComponent(S.value)}`,l=await fetch(d,{headers:{Accept:"application/json"}});if(!l.ok)throw new Error(`Failed to load waste codes (${l.status})`);const V=await l.json();u.value=Array.isArray(V)?V:[]}catch(d){f.value=d?.message||"Failed to load waste codes."}finally{r.value=!1}}return K(c,d=>{d?i():v.value=""}),(d,l)=>(o(),y(G,null,[a(F,{color:"primary",tonal:"",onClick:l[0]||(l[0]=V=>c.value=!0)},{default:t(()=>[a(L,{icon:"mdi-format-list-bulleted"}),l[4]||(l[4]=m(" Browse Federal Waste Codes ",-1))]),_:1}),a(fe,{modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=V=>c.value=V),fullscreen:X(N),"max-width":"1000",scrollable:""},{default:t(()=>[a(P,null,{default:t(()=>[a(Q,{class:"d-flex align-center justify-space-between"},{default:t(()=>[l[5]||(l[5]=n("span",null,"Waste Codes",-1)),a(F,{icon:"mdi-close",variant:"text",onClick:l[1]||(l[1]=V=>c.value=!1)})]),_:1}),a(J),a(W,null,{default:t(()=>[n("div",be,[a(B,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=V=>v.value=V),clearable:"","hide-details":"",label:"Search codes/descriptions","prepend-inner-icon":"mdi-magnify",style:{"max-width":"340px"}},null,8,["modelValue"])]),a(ce,{class:"border-t",density:"compact","fixed-header":"",headers:R,height:"60vh","item-key":"id",items:k.value,loading:r.value},{loading:t(()=>[...l[6]||(l[6]=[n("div",{class:"pa-6 text-medium-emphasis"},"Loading waste codesâ€¦",-1)])]),_:1},8,["items","loading"]),f.value?(o(),C(O,{key:0,border:"start","border-color":"error",class:"mt-3",type:"error",variant:"tonal"},{default:t(()=>[m(h(f.value),1)]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])],64))}},Ve=ee({...re(),...ye()},"VForm"),we=Z()({name:"VForm",props:Ve(),emits:{"update:modelValue":_=>!0,submit:_=>!0},setup(_,N){let{slots:c,emit:S}=N;const u=pe(_),r=g();function f(R){R.preventDefault(),u.reset()}function v(R){const k=R,i=u.validate();k.then=i.then.bind(i),k.catch=i.catch.bind(i),k.finally=i.finally.bind(i),S("submit",k),k.defaultPrevented||i.then(d=>{let{valid:l}=d;l&&r.value?.submit()}),k.preventDefault()}return te(()=>n("form",{ref:r,class:$(["v-form",_.class]),style:ae(_.style),novalidate:!0,onReset:f,onSubmit:v},[c.default?.(u)])),le(u,r)}}),he={href:"https://www.epa.gov/e-manifest/state-only-hazardous-waste-subject-resource-conservation-and-recovery-act-manifests",target:"_blank"},Ce={key:2},_e={class:"font-weight-medium"},Se={class:"mt-8"},xe={class:"flex-grow-1"},Re={key:0,class:"mb-2"},Ae={key:1,class:"mb-2"},Ne={key:2},Ge={class:"mt-2"},qe={__name:"GeneratorWizard",setup(_,{expose:N}){const c=g(""),S=g(!1),u=g(""),r=g(null),f=g(null),v=g(null);function R(){f.value=null,v.value=null}N({reset:R});const k={vsqg:"100 kilograms or less of hazardous waste or 1 kilogram or less of acutely hazardous waste",sqg:"More than 100 kilograms, but less than 1,000 kilograms",lqg:"More than 1,000 kilograms or more than one kilogram of acutely hazardous waste"},i={vsqg:{fullName:"Very Small Quantity Generators",shortName:"VSQGs",registerId:!1,registerUser:!1,registerElectronic:!0},sqg:{fullName:"Small Quantity Generators",shortName:"SQGs",registerId:!0,registerUser:!0,registerElectronic:!0},lqg:{fullName:"Large Quantity Generators",shortName:"LQGs",registerId:!0,registerUser:!0,registerElectronic:!0}},d={registerId:"Required to obtain an EPA ID Number",registerUser:"Required for user to register for an account",registerElectronic:"Required to have a registered user to use Electronic"},l=x(()=>Object.entries(i).map(([p,e])=>({key:p,...e}))),V=x(()=>Object.entries(d).map(([p,e])=>({key:p,label:e}))),M=x(()=>c.value.trim().toUpperCase().replace(/\s+/g,"")),H=x(()=>r.value&&r.value.locationAddress!==null),T=x(()=>r.value?r.value.largeQuantityGenerator?"LQG":r.value.smallQuantityGenerator?"SQG":r.value.verySmallQuantityGenerator?"VSQG":null:null),U=x(()=>{const p=r.value;if(!p)return[];const e=[];return p.operatingTsdf&&e.push("TSDF"),p.transporter&&e.push("Transporter"),p.transferFacility&&e.push("Transfer Facility"),p.hwCleanupSite&&e.push("Cleanup Site"),e});x(()=>r.value?JSON.stringify(r.value,null,2):"");async function z(){u.value="",r.value=null;const p=M.value;if(!p){u.value="Please enter an EPA ID Number.";return}const e=`https://rcrapublic.epa.gov/rcra-hwip/api/site/summary/${encodeURIComponent(p)}`,s=new AbortController,b=setTimeout(()=>s.abort(),1e4);S.value=!0;try{const A=await fetch(e,{method:"GET",headers:{Accept:"application/json"},signal:s.signal});if(!A.ok)throw A.status===404?new Error("No site found for that EPA ID."):new Error(`Lookup failed (${A.status})`);const D=await A.json();r.value=Array.isArray(D)?D[0]??null:D,r.value||(u.value="No site found for that EPA ID.")}catch(A){u.value=A.name==="AbortError"?"Request timed out. Please try again.":A.message||"Lookup failed. Please try again."}finally{clearTimeout(b),S.value=!1}}return(p,e)=>(o(),C(ge,{class:"pa-3"},{default:t(()=>[n("div",null,[e[10]||(e[10]=n("div",{class:"text-h6 mb-4"},"Generator Obligations",-1)),a(j,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s)},{label:t(()=>[...e[3]||(e[3]=[n("span",{class:"text-wrap"},"Does your site generate federally-regulated RCRA hazardous waste?",-1)])]),default:t(()=>[a(E,{label:"Yes",value:"yes"}),a(E,{label:"No",value:"no"})]),_:1},8,["modelValue"]),a(ke),f.value==="yes"?(o(),C(j,{key:0,modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=s=>v.value=s),class:"mt-6"},{label:t(()=>[...e[4]||(e[4]=[n("span",{class:"text-wrap"},"How much waste is generated at your site on a monthly basis?",-1)])]),default:t(()=>[(o(),y(G,null,q(k,(s,b)=>a(E,{key:b,label:s,value:b},null,8,["label","value"])),64))]),_:1},8,["modelValue"])):w("",!0),f.value==="no"?(o(),C(O,{key:1,class:"mt-8",type:"info",variant:"tonal"},{default:t(()=>[e[6]||(e[6]=m(" Site is not subject to federal RCRA requirements. Please verify if your site generates any ",-1)),n("a",he,[e[5]||(e[5]=m(" state-only regulated waste subject to RCRA requirements ",-1)),a(L,{icon:"mdi-open-in-new",size:"18"})]),e[7]||(e[7]=m(" and follow applicable regulatory requirements.",-1))]),_:1})):w("",!0),f.value==="yes"&&v.value?(o(),y("div",Ce,[a(ve,{density:"comfortable"},{default:t(()=>[n("thead",null,[n("tr",null,[e[9]||(e[9]=n("th",{class:"text-left"},"Requirement",-1)),(o(!0),y(G,null,q(l.value,s=>(o(),y("th",{key:s.key,class:"text-center"},[m(h(s.shortName)+" ",1),s.key&&s.key===v.value?(o(),C(I,{key:0},{default:t(()=>[...e[8]||(e[8]=[m("Selected",-1)])]),_:1})):w("",!0)]))),128))])]),n("tbody",null,[(o(!0),y(G,null,q(V.value,s=>(o(),y("tr",{key:s.key},[n("td",_e,h(s.label),1),(o(!0),y(G,null,q(l.value,b=>(o(),y("td",{key:b.key,class:$(b.key&&b.key===v.value?"bg-grey-lighten-3 text-center":"text-center")},[a(I,{color:i[b.key][s.key]?"success":"error",label:"","prepend-icon":i[b.key][s.key]?"mdi-check-circle":"mdi-close-circle",size:"small",variant:i[b.key][s.key]?"tonal":"outlined"},{default:t(()=>[m(h(i[b.key][s.key]?"Yes":"No"),1)]),_:2},1032,["color","prepend-icon","variant"])],2))),128))]))),128))])]),_:1})])):w("",!0)]),n("div",Se,[a(P,null,{default:t(()=>[a(Q,null,{default:t(()=>[...e[11]||(e[11]=[m("EPA ID Number Lookup",-1)])]),_:1}),a(we,{class:"mx-6",onSubmit:oe(z,["prevent"])},{default:t(()=>[a(B,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=s=>c.value=s),class:"epa-id-field",clearable:"",density:"comfortable",error:!!u.value,"error-messages":u.value?[u.value]:[],label:"EPA ID Number",variant:"outlined",onKeyup:ne(z,["enter"])},{"append-inner":t(()=>[a(F,{color:"primary",disabled:!c.value||S.value,loading:S.value,size:"small",variant:"flat",onClick:z},{default:t(()=>[...e[12]||(e[12]=[m(" Search ",-1)])]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue","error","error-messages"])]),_:1})]),_:1}),r.value?(o(),C(P,{key:0,class:"mt-4"},{default:t(()=>[a(Q,{class:"d-flex align-center"},{default:t(()=>[n("div",xe,h(r.value.handlerName||"Unknown site name"),1),r.value.activeSite?(o(),C(I,{key:0,class:"ml-2",color:"success",label:"",size:"small"},{default:t(()=>[...e[13]||(e[13]=[m(" Active Site ",-1)])]),_:1})):w("",!0)]),_:1}),a(ue,null,{default:t(()=>[m(h(r.value.handlerId),1)]),_:1}),a(W,null,{default:t(()=>[H.value?(o(),y("div",Re,[e[14]||(e[14]=n("strong",null,"Address:",-1)),m(" "+h(r.value.locationAddress),1)])):w("",!0),T.value?(o(),y("div",Ae,[e[15]||(e[15]=n("strong",null,"Generator Category:",-1)),a(I,{class:"ml-2",color:"primary",label:"",size:"small"},{default:t(()=>[m(h(T.value),1)]),_:1})])):w("",!0),U.value.length>0?(o(),y("div",Ne,[e[16]||(e[16]=n("strong",null,"Roles:",-1)),n("div",Ge,[(o(!0),y(G,null,q(U.value,s=>(o(),C(I,{key:s,class:"mr-2 mb-2",color:"blue",label:"",size:"small"},{default:t(()=>[m(h(s),1)]),_:2},1024))),128))])])):w("",!0)]),_:1})]),_:1})):w("",!0)])]),_:1}))}},Ie=se(qe,[["__scopeId","data-v-f21a108b"]]),je={__name:"Generator-Wizard",setup(_){return(N,c)=>(o(),C(me,{class:"py-12"},{default:t(()=>[a(ie,{justify:"center"},{default:t(()=>[a(de,{cols:"12",lg:"7",md:"8"},{default:t(()=>[a(Ie)]),_:1})]),_:1})]),_:1}))}};export{je as default};
